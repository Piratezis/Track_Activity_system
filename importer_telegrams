import json
from telethon import TelegramClient
from telethon.tl.types import PeerChannel

# Настройки клиента
api_id = '25290973'
api_hash = '35b85b1a818c842836e7f5fb0bdcadb7'
phone_number = '+79935474292'

client = TelegramClient('session_name', api_id, api_hash)

async def main():
    await client.start()
    chat = await client.get_entity('https://t.me/pokolenie_charity')
    messages = []

    async for message in client.iter_messages(chat):
        messages.append(message.text)
    with open('chat_messages.json', 'w', encoding='utf-8') as f:
        json.dump(messages, f, ensure_ascii=False, indent=4)
    print("ГОТОВО")

with client:
    client.loop.run_until_complete(main())
